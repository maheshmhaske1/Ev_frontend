<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>EV App Admin</title>

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css" />
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet" />

    <link type="image/png" sizes="16x16" rel="icon" href="./img/fav_icon/icons8-people-16.png">

    <!-- Custom styles for this template -->
    <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link href="css/sb-admin-2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/style.css">

    <!-- Custom styles for this page -->
    <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./src/toast.css">

</head>

<body id="page-top">


    <div id="wrapper">
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="dashboard.html">
                <i class="fas fa-car"></i>

                <div class="sidebar-brand-text mx-3"> EV App Admin <sup></sup></div>
            </a>
            <hr class="sidebar-divider my-0" />
            <li class="nav-item">
                <a class="nav-link" href="dashboard.html">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span></a>
            </li>
            <hr class="sidebar-divider" />
            <li class="nav-item">
                <a class="nav-link" href="tables.html">
                    <i class="fas fa-users"></i>
                    <span>User</span></a>
            </li>
            <hr class="sidebar-divider" />
            <li class="nav-item">
                <a class="nav-link" href="change_password.html">
                    <i class="fas fa-key"></i>
                    <span>Change Password</span></a>
            </li>
            <hr class="sidebar-divider" />
            <li class="nav-item">
                <a class="nav-link" href="charger_managment.html">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-ev-station" viewBox="0 0 16 16">
                        <path
                            d="M3.5 2a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-5Zm2.131 10.46H4.14v-.893h1.403v-.505H4.14v-.855h1.49v-.54H3.485V13h2.146v-.54Zm1.316.54h.794l1.106-3.333h-.733l-.74 2.615h-.031l-.747-2.615h-.764L6.947 13Z" />
                        <path
                            d="M3 0a2 2 0 0 0-2 2v13H.5a.5.5 0 0 0 0 1h11a.5.5 0 0 0 0-1H11v-4a1 1 0 0 1 1 1v.5a1.5 1.5 0 0 0 3 0V4a.5.5 0 0 0-.146-.354l-.5-.5a.5.5 0 0 0-.707 0l-.5.5A.5.5 0 0 0 13 4v3c0 .71.38 1.096.636 1.357l.007.008c.253.258.357.377.357.635v3.5a.5.5 0 1 1-1 0V12a2 2 0 0 0-2-2V2a2 2 0 0 0-2-2H3Zm7 2v13H2V2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1Z" />
                    </svg> <span>Charger Management</span></a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="car_managment.html">
                    <i class="fas fa-car"></i>
                    <span>Car Management</span></a>
            </li>

            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>
        </ul>

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
                    <form class="form-inline">
                        <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                            <i class="fa fa-bars"></i>
                        </button>
                    </form>


                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown no-arrow d-sm-none">
                            <div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in"
                                aria-labelledby="searchDropdown">
                                <form class="form-inline mr-auto w-100 navbar-search">
                                    <div class="input-group">
                                    </div>
                                </form>
                            </div>
                        </li>
                        <!-- Nav Item - Alerts -->
                        <div class="topbar-divider d-none d-sm-block"></div>
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Admin</span>
                                <img class="img-profile rounded-circle" src="img/undraw_profile.svg" />
                            </a>
                        </li>
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <button id="log_out" type="button" class="btn btn-danger">Logout</i></button>
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document" style="border-radius: 25%;">

                        <!-- Model Start -->
                        <div class="modal-content">
                            <div class="modal-body">


                                <div id="add_car_ui" style="display: block;">
                                    <div class="card w-200" style="margin: 20px; padding: 0; border: 3px sol;">

                                        <div class="card-body">

                                            <h5 class="text-info" style="align-items: center; text-align: center;">
                                                Add Vehicle
                                            </h5>
                                            <br>


                                            <div class="row">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">Vehicle
                                                        Brand</b>
                                                    <input type='text' class="form-control" id="vehicle_brand" required>
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">Vehicle
                                                        Type</b>
                                                    <select class="custom-select" id="vehicle_type">
                                                        <option value="2 wheeler">2 wheeler</option>
                                                        <option value="4 wheeler">4 wheeler</option>
                                                        <option value="" selected>none</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Range</b>
                                                    <input type='text' class="form-control" id="range">
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">Charging
                                                        Time</b>
                                                    <input type='text' class="form-control" id="charging_time">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Version</b>
                                                    <input type='text' class="form-control" id="vehicle_version">
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Seat Capacity</b>
                                                    <select class="custom-select" id="seat_capacity">
                                                        <option value="2 Seater">2 Seater</option>
                                                        <option value="3 Seater">3 Seater</option>
                                                        <option value="4 Seater">4 Seater</option>
                                                        <option value="" selected>none</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Milage</b>
                                                    <input type='text' class="form-control" id="milage">
                                                </div>
                                                <div class="col">

                                                </div>
                                            </div>

                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Colors</b>
                                                    <input type='text' class="form-control"
                                                        placeholder="ex. red,yellow" id="colors">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Image Url</b>
                                                    <input type='text' class="form-control" id="image_url">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Source Url</b>
                                                    <input type='text' class="form-control" id="source_url">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Pros</b>
                                                    <textarea class="form-control" rows="2"
                                                        placeholder="ex. good,cheap" id="pros"></textarea>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Cons</b>
                                                    <textarea class="form-control" rows="2"
                                                        placeholder="ex. bad,expensive" id="cons"></textarea>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Cost</b>
                                                    <input type='text' class="form-control" placeholder="ex. 123456"
                                                        id="cost">
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Transmission</b>
                                                    <select class="custom-select" id="transmission_type">
                                                        <option value="Manual">Manual</option>
                                                        <option value="Automatic">Automatic</option>
                                                        <option value="Automatic (Torque Converter)">Automatic (Torque
                                                            Converter)</option>
                                                        <option value="Automatic (CVT)">Automatic (CVT)</option>
                                                        <option value="" selected>none</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Motor Type</b>
                                                    <input type='text' class="form-control" id="motor_type">
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Motor Torque</b>
                                                    <input type='text' class="form-control" id="motor_torque">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Fuel Type</b>
                                                    <select class="custom-select" id="fuel_type">
                                                        <option value="Electric">Electric</option>
                                                        <option value="Hybrid (Electric + Petrol)">Hybrid (Electric +
                                                            Petrol)</option>
                                                        <option value="" selected>none</option>
                                                    </select>
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Fuel Tank Capacity</b>
                                                    <input type='text' class="form-control" id="fuel_tank_capacity">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">

                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        EmissionNorm Compliance</b>
                                                    <input type='text' class="form-control"
                                                        id="emission_norm_compliance">
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Engine</b>
                                                    <input type='text' class="form-control" id="engine">
                                                </div>
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Fast Charging</b>
                                                    <select class="custom-select" id="fast_charging">
                                                        <option value="true">true</option>
                                                        <option value="false">false</option>
                                                        <option value="" selected>none</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px;">
                                                <div class="col">
                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                        Description</b>
                                                    <textarea class="form-control" rows="2" id="description"></textarea>
                                                </div>
                                            </div>

                                            <br>
                                            <button type="button" class="btn btn-outline-danger"
                                                data-dismiss="modal">Close</button>
                                            <button id="add_vehicle" type="submit" class="btn btn-outline-info">Add
                                                vehicle</button>
                                            <div class="mb-4">
                                                <hr data-content="OR" class="hr-text">
                                            </div>
                                            <button id="import_csv_btn" class="btn btn-info">import using
                                                Csv</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="import_csv_ui" style="display: block; display: none;">
                                    <div class="card w-150" style="margin: 20px; padding: 0; border: 3px sol;">
                                        <div class="card-body">
                                            <div class="form-group">
                                                <input type="file" name="csvFile" id="csvFile" />
                                                <br /><br />
                                                <button class="btn btn-outline-warning" id="upload">upload</button>
                                            </div>
                                            <div class="mb-4">
                                                <hr data-content="OR" class="hr-text">
                                            </div>
                                            <button id="add_vehicle_btn" class="btn btn-info">Add Vehicle</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Begin Page Content -->
                <div class="container-fluid">
                    <div id="content">
                        <div class="display_table" id="display_table">
                            <div class="card" style="width: 100%;">
                                <table>
                                    <th>
                                        <h3 style="text-align: center; color: #17a2b8;">vehicles</h3>
                                    </th>
                                    <th>
                                    </th>
                                    <th>
                                        <div class="row my-4" style="margin-right: -20px;">
                                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                                data-target="#exampleModal1"
                                                style="border-radius: 25px; background-color:rgb(255 114 38); border: none;">
                                                <i class="fa fa-plus"></i> </button>
                                        </div>
                                    </th>
                                </table>
                                <!-- <div class="row" style="align-items: center;justify-content: center;overflow-x: auto;"> -->

                                <div class="row"
                                    style="justify-content: center;align-items: center;margin-top: 20px;overflow-x: auto;">
                                    <div class="row" style="margin-left: 35px;">
                                        <table id="example" class="table table-bordered" width="100%"
                                            style="margin-left: -18px; overflow: scroll;"></table>
                                    </div>
                                </div>


                                <div id="update_form">
                                </div>
                                <button data-toggle="modal" id="update_model_open" data-target="#exampleModal"
                                    style="display:none"></button>
                            </div>
                        </div>

                        <div class="display_car_info" id="display_car_info" style="display: none;">
                            <div class="card" style="margin: 30px; border: none;">
                                <table>
                                    <th style="margin-left: 15px;">
                                        <button id="back_button" type="button" class="btn btn-outline-danger"
                                            style="margin-top: 10px; border-radius: 20px; margin-left: 10px;"><b>
                                                <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
                                        </button>
                                    </th>
                                </table>

                                <div class="page-content page-container" id="page-content">
                                    <div class="padding">
                                        <div class="row container d-flex justify-content-center">
                                            <div class="col-xl-6 col-md-12">
                                                <div class="card user-card-full">
                                                    <div class="row m-l-0 m-r-0">
                                                        <div class="col-sm-4 bg-c-lite-green user-profile">
                                                            <div class="card-block text-center text-white">
                                                                <div class="m-b-25">
                                                                </div>
                                                                <h6 class="f-w-600"></h6>
                                                                <p style="justify-content: center;"><b>Car
                                                                        Information</b> </p>
                                                                <i
                                                                    class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                                                <img id="vehicle_photo" src='' alt=""
                                                                    style="width: 130px;margin-left:-17px;border-radius: 5px;">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-8">
                                                            <div class="card-block">
                                                                <br>
                                                                <h6 class="m-b-20 p-b-5 b-b-default f-w-600"
                                                                    style="color: rgb(252, 166, 7);">Basic Information
                                                                </h6>
                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Type</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehical_type">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Brand</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehicle_brand">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Version</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehicle_version">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Class</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehicle_class">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Cost</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehicle_cost">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Colors</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_vehicle_colors">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Fuel Type</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_fuel_type">--
                                                                        </h6>
                                                                    </div>

                                                                </div>
                                                                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"
                                                                    style="color: rgb(252, 166, 7);">Milage and Battery
                                                                </h6>
                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Range</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_range">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Battery Capacity</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_battery_capacity">--
                                                                        </h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Milage</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_milage">--
                                                                        </h6>
                                                                    </div>
                                                                </div>
                                                                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"
                                                                    style="color: rgb(252, 166, 7);">Charging
                                                                </h6>
                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Fast Charging</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_fast_charging">--</h6>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p class="m-b-10 f-w-600">Charging Time</p>
                                                                        <h6 class="text-muted f-w-400"
                                                                            id="moreInfo_charging_time">--</h6>
                                                                    </div>
                                                                </div>
                                                                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"
                                                                    style="color: rgb(252, 166, 7);">Other
                                                                </h6>
                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <a id="more_info_link" target="_blank"
                                                                            class="fa fa-info-circle" href=""
                                                                            style="text-decoration: none;"> More
                                                                            Info</a>
                                                                    </div>
                                                                </div>
                                                                <ul class="social-link list-unstyled m-t-40 m-b-10">
                                                                    <li><a href="#!" data-toggle="tooltip"
                                                                            data-placement="bottom" title=""
                                                                            data-original-title="facebook"
                                                                            data-abc="true"><i
                                                                                class="mdi mdi-facebook feather icon-facebook facebook"
                                                                                aria-hidden="true"></i></a></li>
                                                                    <li><a href="#!" data-toggle="tooltip"
                                                                            data-placement="bottom" title=""
                                                                            data-original-title="twitter"
                                                                            data-abc="true"><i
                                                                                class="mdi mdi-twitter feather icon-twitter twitter"
                                                                                aria-hidden="true"></i></a></li>
                                                                    <li><a href="#!" data-toggle="tooltip"
                                                                            data-placement="bottom" title=""
                                                                            data-original-title="instagram"
                                                                            data-abc="true"><i
                                                                                class="mdi mdi-instagram feather icon-instagram instagram"
                                                                                aria-hidden="true"></i></a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Ev.com</span>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>



    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>
    <!-- Page level plugins -->
    <script src="vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>
    <!-- Page level custom scripts -->
    <script src="js/demo/datatables-demo.js"></script>
    <script src="./src/toast.js"></script>
    <script>
        $(document).ready(function () {

            $.toast({
                loaderBg: "#25a88e"
            })

            function abortSession() {
                localStorage.removeItem("cookie")
            }

            if (!(localStorage.getItem("cookie")) || (localStorage.getItem("cookie")) == null) {
                if (confirm("access denied! please login")) {
                    $('#wrapper').css('display', 'none')
                    window.location.href = './index.html'
                }
                else
                    window.location.href = './index.html'
            }

            $("#log_out").click(() => {
                if (confirm("are you sure") == true) {
                    localStorage.removeItem("cookie")
                    window.location.href = './index.html'
                }
            })

            $.ajax({
                url: `http://35.78.201.111:4001/vehicle/get-all`,
                method: "GET",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', `Bearer ${localStorage.getItem("cookie")}`);
                },
                dataType: "json",
                success: success => {
                    let arr1 = []
                    let arr2 = []
                    success.data.map(((data, i) => {

                        arr2.push(
                            `<p data-id=${data._id} onclick=detail_info(this)>${i + 1}</p>`,
                            `<p data-id=${data._id} onclick=detail_info(this)>${data.vehicle_type}</p>`,
                            `<p data-id=${data._id} onclick=detail_info(this)>${data.vehicle_brand}</p>`,
                            `<p data-id=${data._id} onclick=detail_info(this)>${data.vehicle_version}</p>`,
                            `<p data-id=${data._id} onclick=detail_info(this)>${data.cost}</p>`,
                            `<p data-id=${data._id} onclick=detail_info(this)>${data.fast_charging == true ? "Yes" : "No"}</p>`,
                            `    <th scope="row">
                          <div>
                            <a onclick=edit(this) data-name="${data.vehical_type}" data-d=${data.is_deleted} data-id=${data._id}  style="color: #FFC107;">
                                <div>
       
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
                                        </svg>
                                        <div class="spinner-grow spinner-grow-sm" id="loader" style="display:none"></div>
                                    </a>

                                    <b style="color: #e3e9dc;">|</b>                                 

                            <a data-id=${data._id} onclick=delete_data(this) style="color: #E34724;">
                                      <b>  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                                        </svg>
                                        <div class="spinner-grow spinner-grow-sm" id="oader" style="display:none"></div>
                                    </a>
                                    <b style="color: #e3e9dc;">|</b>     
                                    <div class="spinner-grow spinner-grow-sm" id="oader" style="display:none"></div>
                            </th>`
                        )
                        arr1.push(arr2)
                        arr2 = []
                    }))

                    $('#example').DataTable({
                        columnDefs: [{
                            "defaultContent": "-",
                            "targets": "_all",
                            bAutoWidth: false,
                            "width": "15%", "targets": 3,
                        }],
                        data: arr1,
                        columns: [
                            { title: '#' },
                            { title: 'Vehicle Type' },
                            { title: 'Vehicle Brand' },
                            { title: 'Vehicle Version' },
                            { title: 'Cost' },
                            { title: 'Fast Charging' },
                            { title: 'Actions' }
                        ],
                    });
                }
            })
        });

        (function () {
            'use strict'

            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
        })()

        $('#import_csv_btn').click(() => {
            $('#import_csv_ui').css('display', 'block')
            $('#add_car_ui').css('display', 'none')
        })
        $('#add_vehicle_btn').click(() => {
            $('#import_csv_ui').css('display', 'none')
            $('#add_car_ui').css('display', 'block')
        })

        // ===================== upload data using csv ===================== //
        $('#upload').click(function () {
            var csvFile = new FormData();

            csvFile.append('csvFile', $('#csvFile')[0].files[0]);

            $.ajax({
                url: 'http://35.78.201.111:4001/api/uploadCsv/create',
                data: csvFile,
                processData: false,
                contentType: false,
                type: 'POST',
                success: function (data) {
                    if (data.status == true) {
                        $('#data').empty();
                        $('#data').append(data);
                        $.toast({
                            heading: "Success",
                            text: "Data Added",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "success"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                    else {
                        $.toast({
                            heading: "Error",
                            text: "Something went wrong",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "error"
                        })
                        $('#data').empty();
                        $('#data').append(data);
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                }
            });
        });



        // ================  DETAIL INFO PAGE LOAD ================ //
        function detail_info(info) {
            var id = $(info).attr("data-id")

            $.ajax({
                url: `http://35.78.201.111:4001/vehicle/get/${id}`,
                method: "GET",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', `Bearer ${localStorage.getItem("cookie")}`);
                },
                data: { "car_id": id },
                dataType: "json",
                success: success => {
                    if (success.status == false) {
                        createAlert('', `Error! `, '', 'warning', false, true, 'pageMessages')
                    }
                    if (success.status == true) {
                        const vehicles = (success.data[0].vehicles)
                        $('#display_table').hide();
                        $('#display_car_info').css({ display: 'block' });
                        $("#moreInfo_vehical_type").text(vehicles.vehicle_type)
                        $("#moreInfo_vehicle_brand").text(vehicles.vehicle_brand)
                        $("#moreInfo_vehicle_cost").text(vehicles.cost)
                        $("#moreInfo_vehicle_version").text(vehicles.vehicle_version)
                        $("#moreInfo_vehicle_class").text(vehicles.class)
                        $("#moreInfo_vehicle_colors").text(vehicles.colors)
                        $("#moreInfo_fuel_type").text(vehicles.fuel_type)
                        $("#moreInfo_range").text(vehicles.range)
                        $("#moreInfo_battery_capacity").text(vehicles.battery_capacity)
                        $("#moreInfo_milage").text(vehicles.milage)
                        $("#moreInfo_fast_charging").text(vehicles.fast_charging == "true" ? 'Yes' : 'No')
                        $("#moreInfo_charging_time").text(vehicles.charging_time)
                        $("#more_info_link").attr("href", vehicles.source_url)
                        $("#vehicle_photo").attr("src", vehicles.image_url)
                    }
                },
            })
        }

        $('#back_button').click(() => {
            $('#display_car_info').css({ display: 'none' });
            $('#display_table').css({ display: 'block' });
        })


        // ======================== update car ======================= //
        function edit(info) {
            let html = ``
            var id = $(info).attr("data-id")

            var $request = $.ajax({
                url: `http://35.78.201.111:4001/vehicle/get/${id}`,
                type: "get",
                dataType: "json",
            });
            $request.done(async function (data) {
                var vehicles = data.data[0].vehicles
                html = ``
                html = `
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <div id="add_car_ui" style="display: block;">
                                                    <div class="card w-150"
                                                        style="margin: 20px; padding: 0; border: 3px sol;">
                                                        <div class="modal-body" style="padding: 20px;">
                                                            <h5 class="text-info"
                                                                style="align-items: center; text-align: center;">
                                                                Update car
                                                            </h5>
                                                            <div class="col">
                                                                    <input type='hidden' class="form-control" id="_id" value=${id} required>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">Vehicle
                                                                        Brand</b>
                                                                    <input type='text' class="form-control" id="update_vehicle_brand" value=${vehicles.vehicle_brand} required>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">Vehicle
                                                                        Type</b>
                                                                    <select class="custom-select" id="update_vehicle_type">
                                                                        <option value="${vehicles.vehicle_type}" selected>${vehicles.vehicle_type}</option>
                                                                        <option value="2 wheeler">2 wheeler</option>
                                                                        <option value="4 wheeler">4 wheeler</option>
                                                                        <option value="" >none</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Range</b>
                                                                    <input type='text' class="form-control" id="update_range" value='${vehicles.range}'>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">Charging
                                                                        Time</b>
                                                                    <input type='text' class="form-control" id="update_charging_time" value='${vehicles.charging_time}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Version</b>
                                                                    <input type='text' class="form-control" id="update_vehicle_version" value='${vehicles.vehicle_version}'>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Seat Capacity</b>
                                                                    <select class="custom-select" id="update_seat_capacity">
                                                                        <option value="${vehicles.seat_capacity}" selected>${vehicles.seat_capacity}</option>
                                                                        <option value="2 Seater">2 Seater</option>
                                                                        <option value="3 Seater">3 Seater</option>
                                                                        <option value="4 Seater">4 Seater</option>
                                                                        <option value="">none</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Milage</b>
                                                                    <input type='text' class="form-control" id="update_milage" value='${vehicles.milage}'>
                                                                </div>
                                                                <div class="col">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Colors</b>
                                                                    <input type='text' class="form-control"
                                                                        placeholder="ex. red,yellow" id="update_colors" value='${vehicles.colors}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Image Url</b>
                                                                    <input type='text' class="form-control" id="update_image_url" value='${vehicles.image_url}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Source Url</b>
                                                                    <input type='text' class="form-control" id="update_source_url" value='${vehicles.source_url}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Pros</b>
                                                                    <textarea class="form-control" rows="2"
                                                                        placeholder="ex. good,cheap" id="update_pros">${vehicles.pros}</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Cons</b>
                                                                    <textarea class="form-control" rows="2"
                                                                        placeholder="ex. bad,expensive" id="update_cons">${vehicles.cons}</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Cost</b>
                                                                    <input type='text' class="form-control" placeholder="ex. 123456"
                                                                        id="update_cost" value=${vehicles.cost}>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Transmission</b>
                                                                    <select class="custom-select" id="update_transmission_type">
                                                                        <option value="${vehicles.transmission_type}" selected>${vehicles.transmission_type}</option>
                                                                        <option value="Manual">Manual</option>
                                                                        <option value="Automatic">Automatic</option>
                                                                        <option value="Automatic (Torque Converter)">Automatic (Torque
                                                                            Converter)</option>
                                                                        <option value="Automatic (CVT)">Automatic (CVT)</option>
                                                                        <option value="" selected>none</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Motor Type</b>
                                                                    <input type='text' class="form-control" id="update_motor_type" value='${vehicles.motor_type}'>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Motor Torque</b>
                                                                    <input type='text' class="form-control" id="update_motor_torque" value='${vehicles.motor_torque}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Fuel Type</b>
                                                                    <select class="custom-select" id="update_fuel_type">
                                                                        <option value="${vehicles.fuel_type}" selected>${vehicles.fuel_type}</option>
                                                                        <option value="Electric">Electric</option>
                                                                        <option value="Hybrid (Electric + Petrol)">Hybrid (Electric +
                                                                            Petrol)</option>
                                                                        <option value="">none</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Fuel Tank Capacity</b>
                                                                    <input type='text' class="form-control" id="update_fuel_tank_capacity" value='${vehicles.fuel_tank_capacity}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">

                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        EmissionNorm Compliance</b>
                                                                    <input type='text' class="form-control"
                                                                        id="update_emission_norm_compliance" value='${vehicles.emission_norm_compliance}'>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Engine</b>
                                                                    <input type='text' class="form-control" id="update_engine" value='${vehicles.engine}'>
                                                                </div>
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Fast Charging</b>
                                                                    <select class="custom-select" id="update_fast_charging">
                                                                        <option value="${vehicles.fast_charging}" selected>${vehicles.fast_charging}</option>
                                                                        <option value="true">true</option>
                                                                        <option value="false">false</option>
                                                                        <option value="">none</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-top: 5px;">
                                                                <div class="col">
                                                                    <b style="font-size: 13px;color: #17a2b8!important;">
                                                                        Description</b>
                                                                    <textarea class="form-control" rows="2" id="update_description" />${vehicles.description}</textarea>
                                                                </div>
                                                            </div>
                                                            <br>
                                                            <button type="button" class="btn btn-outline-danger"
                                                                data-dismiss="modal">Close</button>
                                                            <button type="submit"
                                                                class="btn btn-outline-info" onclick=update_vehicle(this)>Update
                                                                </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                
                                    </div>
                                </div> `
                $("#update_form").html(html)
                $("#update_model_open").click()
            })
        }

        function delete_data(e) {
            if (confirm("are you sure!") == true) {
                var id = $(e).attr("data-id")
                var $request = $.ajax({
                    url: `http://35.78.201.111:4001/vehicle/delete`,
                    data: { car_id: id },
                    type: "DELETE",
                    dataType: "json",
                });
                $request.done(function (success) {
                    if (success.status == false) {
                        $.toast({
                            heading: "Error",
                            text: "Something went wrong",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "error"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                    if (success.status == true) {
                        $.toast({
                            heading: "Success",
                            text: "Vehicle Deleted",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "success"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                })
            }
        }

        $('#add_vehicle').click(() => {

            var obj = {
                vehicle_brand: $('#vehicle_brand').val(),
                vehicle_type: $('#vehicle_type').val(),
                range: $('#range').val(),
                charging_time: $('#charging_time').val(),
                vehicle_version: $('#vehicle_version').val(),
                seat_capacity: $('#seat_capacity').val(),
                milage: $('#milage').val(),
                colors: $('#colors').val() ? $('#colors').val().split(',') : '',
                source_url: $('#source_url').val(),
                image_url: $('#image_url').val(),
                cons: $('#cons').val() ? $('#pros').val().split(',') : '',
                pros: $('#pros').val() ? $('#pros').val().split(',') : '',
                cost: $('#cost').val(),
                transmission_type: $('#transmission_type').val(),
                motor_type: $('#motor_type').val(),
                motor_torque: $('#motor_torque').val(),
                motor_power: $('#motor_power').val(),
                fuel_type: $('#fuel_type').val(),
                fuel_tank_capacity: $('#fuel_tank_capacity').val(),
                emission_norm_compliance: $('#emission_norm_compliance').val(),
                engine: $('#engine').val(),
                fast_charging: $('#fast_charging').val() == "true" ? true : false,
                description: $('#description').val()
            }
            obj.cost = Number(obj.cost)


            $.ajax({
                url: "http://35.78.201.111:4001/vehicle/add",
                method: "POST",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', `Bearer ${localStorage.getItem("cookie")}`);
                },
                dataType: "json",
                contentType: "application/json",
                data: JSON.stringify(obj),

                success: success => {
                    if (success.status == false) {
                        $.toast({
                            heading: "Error",
                            text: "Something went wrong",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "error"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                    if (success.status == true) {
                        $.toast({
                            heading: "Success",
                            text: "Vehicle Added",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "success"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                },
            })
        })

        function update_vehicle() {
            let id = $('#_id').val()
            let obj = {
                vehicle_brand: $('#update_vehicle_brand').val(),
                vehicle_type: $('#update_vehicle_type').val(),
                range: $('#update_range').val(),
                charging_time: $('#update_charging_time').val(),
                vehicle_version: $('#update_vehicle_version').val(),
                seat_capacity: $('#update_seat_capacity').val(),
                milage: $('#update_milage').val(),
                colors: $('#update_colors').val() ? $('#update_colors').val().split(',') : '',
                source_url: $('#update_source_url').val(),
                image_url: $('#update_image_url').val(),
                cons: $('#update_cons').val() ? $('#update_pros').val().split(',') : '',
                pros: $('#update_pros').val() ? $('#update_pros').val().split(',') : '',
                cost: $('#update_cost').val(),
                transmission_type: $('#update_transmission_type').val(),
                motor_type: $('#update_motor_type').val(),
                motor_torque: $('#update_motor_torque').val(),
                motor_power: $('#update_motor_power').val(),
                fuel_type: $('#update_fuel_type').val(),
                fuel_tank_capacity: $('#update_fuel_tank_capacity').val(),
                emission_norm_compliance: $('#update_emission_norm_compliance').val(),
                engine: $('#update_engine').val(),
                fast_charging: $('#update_fast_charging').val() == "true" ? true : false,
                description: $('#update_description').val()
            }

            $.ajax({
                url: `http://35.78.201.111:4001/vehicle/update/${id}`,
                method: "PUT",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', `Bearer ${localStorage.getItem("cookie")}`);
                },
                dataType: "json",
                contentType: "application/json",
                data: JSON.stringify(obj),
                success: success => {
                    if (success.status == false) {
                        $.toast({
                            heading: "Error",
                            text: "Something went wrong",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "error"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 3000);
                    }
                    if (success.status == true) {
                        $.toast({
                            heading: "Success",
                            text: "Vehicle Updated",
                            hideAfter: 2000,
                            position: 'top-center',
                            icon: "success"
                        })
                        setTimeout(() => {
                            location.reload();
                        }, 2500);
                    }
                },
            })
        }




    </script>
</body>

</html>